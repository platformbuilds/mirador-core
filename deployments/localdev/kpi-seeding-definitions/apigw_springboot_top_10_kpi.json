{
  "springboot_apigw_jmx_top_10_kpis": [
    {
      "kpi_name": "JVM Heap Memory Utilization",
      "kpi_formula": "sum(jvm_memory_used_bytes{area=\"heap\"}) / sum(jvm_memory_max_bytes{area=\"heap\"}) * 100",
      "kpi_definition": "The percentage of Java heap memory currently in use. High memory usage can lead to garbage collection overhead and OutOfMemory errors, causing API failures and gateway downtime.",
      "layer": "cause",
      "classifier": "memory_utilization",
      "sentiment": "negative",
      "signal_type": "metrics",
      "query_type": "PromQL",
      "datastore": "victoriametrics",
      "serviceFamily": "apigw"
    },
    {
      "kpi_name": "Garbage Collection Pressure",
      "kpi_formula": "rate(jvm_gc_pause_seconds_sum[5m])",
      "kpi_definition": "The time spent on garbage collection. High GC pressure reduces API throughput, increases response times, and can cause request timeouts during GC pauses.",
      "layer": "cause",
      "classifier": "gc_performance",
      "sentiment": "negative",
      "signal_type": "metrics",
      "query_type": "PromQL",
      "datastore": "victoriametrics",
      "serviceFamily": "apigw"
    },
    {
      "kpi_name": "HTTP Thread Pool Utilization",
      "kpi_formula": "tomcat_threads_busy_threads / tomcat_threads_config_max_threads * 100",
      "kpi_definition": "The percentage of active threads in the web server thread pool. High utilization indicates the gateway is approaching its concurrency limit, which can lead to request queuing and connection rejections.",
      "layer": "cause",
      "classifier": "thread_utilization",
      "sentiment": "negative",
      "signal_type": "metrics",
      "query_type": "PromQL",
      "datastore": "victoriametrics",
      "serviceFamily": "apigw"
    },
    {
      "kpi_name": "CPU Utilization",
      "kpi_formula": "rate(process_cpu_usage[5m]) * 100",
      "kpi_definition": "The percentage of CPU capacity used by the API Gateway JVM process. High CPU usage indicates computational bottlenecks that can slow down request processing and routing.",
      "layer": "cause",
      "classifier": "cpu_utilization",
      "sentiment": "negative",
      "signal_type": "metrics",
      "query_type": "PromQL",
      "datastore": "victoriametrics",
      "serviceFamily": "apigw"
    },
    {
      "kpi_name": "Database Connection Pool Utilization",
      "kpi_formula": "hikaricp_connections_active / hikaricp_connections_max * 100",
      "kpi_definition": "The percentage of active database connections from the connection pool. High utilization indicates database bottlenecks for authentication, rate limiting, or routing configuration lookups.",
      "layer": "cause",
      "classifier": "database_connection",
      "sentiment": "negative",
      "signal_type": "metrics",
      "query_type": "PromQL",
      "datastore": "victoriametrics",
      "serviceFamily": "apigw"
    },
    {
      "kpi_name": "JVM Garbage Collection Frequency",
      "kpi_formula": "rate(jvm_gc_pause_seconds_count[5m])",
      "kpi_definition": "The rate of garbage collection events per second. High frequency indicates memory pressure from request/response object churn, causing API latency spikes during GC pauses.",
      "layer": "cause",
      "classifier": "gc_frequency",
      "sentiment": "negative",
      "signal_type": "metrics",
      "query_type": "PromQL",
      "datastore": "victoriametrics",
      "serviceFamily": "apigw"
    },
    {
      "kpi_name": "Request Queue Backlog",
      "kpi_formula": "tomcat_threads_queue_seconds",
      "kpi_definition": "The time API requests spend waiting in the queue before being processed. High queue times indicate the gateway is overloaded and cannot keep up with incoming traffic.",
      "layer": "cause",
      "classifier": "request_capacity",
      "sentiment": "negative",
      "signal_type": "metrics",
      "query_type": "PromQL",
      "datastore": "victoriametrics",
      "serviceFamily": "apigw"
    },
    {
      "kpi_name": "JVM Uptime",
      "kpi_formula": "process_uptime_seconds",
      "kpi_definition": "The time since the API Gateway JVM process started. Frequent restarts indicate instability, memory leaks, or configuration issues that disrupt API availability.",
      "layer": "cause",
      "classifier": "jvm_stability",
      "sentiment": "positive",
      "signal_type": "metrics",
      "query_type": "PromQL",
      "datastore": "victoriametrics",
      "serviceFamily": "apigw"
    },
    {
      "kpi_name": "Active HTTP Sessions",
      "kpi_formula": "tomcat_sessions_active_current",
      "kpi_definition": "The number of active HTTP sessions. High session counts may indicate session management issues or memory leaks that can degrade gateway performance.",
      "layer": "cause",
      "classifier": "session_management",
      "sentiment": "negative",
      "signal_type": "metrics",
      "query_type": "PromQL",
      "datastore": "victoriametrics",
      "serviceFamily": "apigw"
    },
    {
      "kpi_name": "File Descriptor Usage",
      "kpi_formula": "process_files_open_files / process_files_max_files * 100",
      "kpi_definition": "The percentage of file descriptors in use. High usage may indicate socket leaks, file handle leaks, or excessive connections that can lead to API failures when limits are reached.",
      "layer": "cause",
      "classifier": "file_descriptor",
      "sentiment": "negative",
      "signal_type": "metrics",
      "query_type": "PromQL",
      "datastore": "victoriametrics",
      "serviceFamily": "apigw"
    }
  ]
}